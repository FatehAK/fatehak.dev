---
import { APP_CONFIG } from 'appConfig';

const { title = APP_CONFIG.META.title, description = APP_CONFIG.META.description, banner = 'banner.png' } = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site).toString();
const bannerURL = new URL(banner, Astro.site).toString();

const META_TAGS = [
  { name: 'title', content: title },
  { name: 'description', content: description },
  { name: 'author', content: APP_CONFIG.USER.name },
  { name: 'image', content: bannerURL },
  { name: 'generator', content: Astro.generator },
  // Open Graph tags
  { property: 'og:title', content: title },
  { property: 'og:site_name', content: APP_CONFIG.META.appName },
  { property: 'og:type', content: 'website' },
  { property: 'og:description', content: description },
  { property: 'og:image', content: bannerURL },
  { property: 'og:image:alt', content: APP_CONFIG.META.appName },
  { property: 'og:image:width', content: 1280 },
  { property: 'og:image:height', content: 720 },
  { property: 'og:url', content: Astro.url },
  // Twitter tags
  { name: 'twitter:title', content: title },
  { name: 'twitter:site', content: APP_CONFIG.USER.social.twitter },
  { name: 'twitter:creator', content: APP_CONFIG.USER.social.twitter },
  { name: 'twitter:card', content: 'summary_large_image' },
  { name: 'twitter:description', content: description },
  { name: 'twitter:image', content: bannerURL },
  { name: 'twitter:url', content: Astro.url },
];
---

<title>{title}</title>
<link rel="canonical" href={canonicalURL} />
{META_TAGS.map(({ content, ...rest }) => <meta {...rest} content={content} />)}
